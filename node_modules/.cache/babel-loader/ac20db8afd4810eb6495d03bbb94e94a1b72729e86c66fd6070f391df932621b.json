{"ast":null,"code":"import React,{useRef,useState}from'react';import{useNavigate}from'react-router-dom';import Webcam from'react-webcam';import styled from'styled-components';import{motion}from'framer-motion';import{browserSupportsWebAuthn}from'@simplewebauthn/browser';import MazeJourney from'./MazeJourney';// Reuse MazeJourney component\n// Styled-components for layout and form styling\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ChallengeContainer=styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: linear-gradient(to right, #040404, #000000, #656565);\n  text-align: center;\n`;const Title=styled.h2`\n  font-size: 2.5rem;\n  color: white;\n  margin-bottom: 2rem;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n`;const StatusText=styled.p`\n  margin-top: 1rem;\n  font-size: 1.2rem;\n  color: ${props=>props.success?'#28a745':'#ff4757'};\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n`;const Button=styled(motion.button)`\n  padding: 0.8rem 2rem;\n  background-color: #3498db;\n  color: white;\n  border: none;\n  border-radius: 50px;\n  font-size: 1.2rem;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n  margin-top: 1.5rem;\n\n  &:hover {\n    background-color: #2980b9;\n  }\n\n  &:disabled {\n    background-color: #bdc3c7;\n    cursor: not-allowed;\n  }\n`;const Challenge4=()=>{const[faceScanStatus,setFaceScanStatus]=useState('Not Scanned');const[fingerprintStatus,setFingerprintStatus]=useState('Not Scanned');const[photoTaken,setPhotoTaken]=useState(false);const[authenticating,setAuthenticating]=useState(false);const navigate=useNavigate();const webcamRef=useRef(null);// Capture Face\nconst captureFace=React.useCallback(()=>{const imageSrc=webcamRef.current.getScreenshot();console.log('Captured photo:',imageSrc);setFaceScanStatus('Scanning...');setPhotoTaken(true);// Simulate face recognition success or failure\nsetTimeout(()=>{if(Math.random()*(0.6-0.4)+0.4>0.5){// Simulated random success or failure\nsetFaceScanStatus('Face Detected!');startFingerprintAuth();// Proceed to fingerprint authentication\n}else{setFaceScanStatus('Face not detected, Please try again.');setPhotoTaken(false);}},3000);// Simulated delay\n},[]);// Fingerprint Authentication\nconst startFingerprintAuth=async()=>{if(!browserSupportsWebAuthn()){alert('WebAuthn is not supported in your browser.');return;}setAuthenticating(true);try{// Simulate immediate successful fingerprint authentication\nsetTimeout(()=>{setFingerprintStatus('Detected!');navigate('/final');// Redirect or perform action upon successful authentication\nsetAuthenticating(false);},5000);// Simulated delay for user interaction\n}catch(error){console.error('Error during face authentication:',error);setFingerprintStatus('Authentication error. Try again.');setAuthenticating(false);}};return/*#__PURE__*/_jsxs(ChallengeContainer,{children:[/*#__PURE__*/_jsx(MazeJourney,{currentStep:4,totalSteps:4}),/*#__PURE__*/_jsx(Title,{as:motion.h2,initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:0.8},children:\"Last Challenge: Face Authentication\"}),/*#__PURE__*/_jsx(Webcam,{audio:false,ref:webcamRef,screenshotFormat:\"image/jpeg\",width:\"20%\",style:{borderRadius:'15px',marginBottom:'1rem'}}),/*#__PURE__*/_jsx(Button,{onClick:captureFace,disabled:photoTaken,children:photoTaken?'Photo Taken':'Take Photo'}),/*#__PURE__*/_jsxs(StatusText,{success:faceScanStatus==='Face Detected!',children:[\"Status: \",faceScanStatus]}),photoTaken&&/*#__PURE__*/_jsx(\"div\",{children:authenticating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'white',fontFamily:'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif'},children:\"Facial Structure Authentication\"}),/*#__PURE__*/_jsx(StatusText,{success:faceScanStatus==='Face Detected!',children:\"Authenticating...\"})]}):''})]});};export default Challenge4;","map":{"version":3,"names":["React","useRef","useState","useNavigate","Webcam","styled","motion","browserSupportsWebAuthn","MazeJourney","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChallengeContainer","div","Title","h2","StatusText","p","props","success","Button","button","Challenge4","faceScanStatus","setFaceScanStatus","fingerprintStatus","setFingerprintStatus","photoTaken","setPhotoTaken","authenticating","setAuthenticating","navigate","webcamRef","captureFace","useCallback","imageSrc","current","getScreenshot","console","log","setTimeout","Math","random","startFingerprintAuth","alert","error","children","currentStep","totalSteps","as","initial","opacity","y","animate","transition","duration","audio","ref","screenshotFormat","width","style","borderRadius","marginBottom","onClick","disabled","color","fontFamily"],"sources":["C:/Users/ritik/my-webapp/src/components/Challenge4.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Webcam from 'react-webcam';\r\nimport styled from 'styled-components';\r\nimport { motion } from 'framer-motion';\r\nimport { browserSupportsWebAuthn } from '@simplewebauthn/browser';\r\nimport MazeJourney from './MazeJourney'; // Reuse MazeJourney component\r\n\r\n// Styled-components for layout and form styling\r\nconst ChallengeContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  background: linear-gradient(to right, #040404, #000000, #656565);\r\n  text-align: center;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  font-size: 2.5rem;\r\n  color: white;\r\n  margin-bottom: 2rem;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n`;\r\n\r\nconst StatusText = styled.p`\r\n  margin-top: 1rem;\r\n  font-size: 1.2rem;\r\n  color: ${(props) => (props.success ? '#28a745' : '#ff4757')};\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n`;\r\n\r\nconst Button = styled(motion.button)`\r\n  padding: 0.8rem 2rem;\r\n  background-color: #3498db;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 50px;\r\n  font-size: 1.2rem;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n  margin-top: 1.5rem;\r\n\r\n  &:hover {\r\n    background-color: #2980b9;\r\n  }\r\n\r\n  &:disabled {\r\n    background-color: #bdc3c7;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nconst Challenge4 = () => {\r\n  const [faceScanStatus, setFaceScanStatus] = useState('Not Scanned');\r\n  const [fingerprintStatus, setFingerprintStatus] = useState('Not Scanned');\r\n  const [photoTaken, setPhotoTaken] = useState(false);\r\n  const [authenticating, setAuthenticating] = useState(false);\r\n  const navigate = useNavigate();\r\n  const webcamRef = useRef(null);\r\n\r\n  // Capture Face\r\n  const captureFace = React.useCallback(() => {\r\n    const imageSrc = webcamRef.current.getScreenshot();\r\n    console.log('Captured photo:', imageSrc);\r\n    setFaceScanStatus('Scanning...');\r\n    setPhotoTaken(true);\r\n\r\n    // Simulate face recognition success or failure\r\n    setTimeout(() => {\r\n      if (Math.random() * (0.6 - 0.4) + 0.4 > 0.5) { // Simulated random success or failure\r\n        setFaceScanStatus('Face Detected!');\r\n        startFingerprintAuth(); // Proceed to fingerprint authentication\r\n      } else {\r\n        setFaceScanStatus('Face not detected, Please try again.');\r\n        setPhotoTaken(false);\r\n      }\r\n    }, 3000); // Simulated delay\r\n  }, []);\r\n\r\n  // Fingerprint Authentication\r\n  const startFingerprintAuth = async () => {\r\n    if (!browserSupportsWebAuthn()) {\r\n      alert('WebAuthn is not supported in your browser.');\r\n      return;\r\n    }\r\n\r\n    setAuthenticating(true);\r\n    try {\r\n      // Simulate immediate successful fingerprint authentication\r\n      setTimeout(() => {\r\n        setFingerprintStatus('Detected!');\r\n        navigate('/final'); // Redirect or perform action upon successful authentication\r\n        setAuthenticating(false);\r\n      }, 5000); // Simulated delay for user interaction\r\n    } catch (error) {\r\n      console.error('Error during face authentication:', error);\r\n      setFingerprintStatus('Authentication error. Try again.');\r\n      setAuthenticating(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ChallengeContainer>\r\n      {/* MazeJourney to track progress */}\r\n      <MazeJourney currentStep={4} totalSteps={4} />\r\n\r\n      <Title\r\n        as={motion.h2}\r\n        initial={{ opacity: 0, y: -50 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.8 }}\r\n      >\r\n        Last Challenge: Face Authentication\r\n      </Title>\r\n\r\n      <Webcam\r\n        audio={false}\r\n        ref={webcamRef}\r\n        screenshotFormat=\"image/jpeg\"\r\n        width=\"20%\"\r\n        style={{ borderRadius: '15px', marginBottom: '1rem' }}\r\n      />\r\n      <Button onClick={captureFace} disabled={photoTaken}>\r\n        {photoTaken ? 'Photo Taken' : 'Take Photo'}\r\n      </Button>\r\n      <StatusText success={faceScanStatus === 'Face Detected!'}>\r\n        Status: {faceScanStatus}\r\n      </StatusText>\r\n\r\n      {photoTaken && (\r\n        <div>\r\n         {authenticating ? (\r\n  <>\r\n    <h3 style={{color: 'white', fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif'}}>Facial Structure Authentication</h3>\r\n    <StatusText success={faceScanStatus === 'Face Detected!'}>\r\n      Authenticating...\r\n    </StatusText>\r\n  </>\r\n) : ''}\r\n\r\n          \r\n            {/* <span style={{ color: 'red' }}>\r\n              {authenticating ? 'Authenticating...' : ''}\r\n            </span> */}\r\n        </div>\r\n      )}\r\n    </ChallengeContainer>\r\n  );\r\n};\r\n\r\nexport default Challenge4;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}